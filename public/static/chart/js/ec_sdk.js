xh5_define("utils.util",[],function(){return function(){function t(t,e){var n=N(e.prototype);n.constructor=t,t.prototype=n}function e(){this.evtObj={}}function n(t,e){var n=Array.prototype.slice.call(arguments,2);return function(){return t.apply(e,n.concat(Array.prototype.slice.call(arguments)))}}function o(){return Date.now?Date.now():(new Date).getTime()}function r(t,e){e||(t=t.toLowerCase());for(var n,o=1315423911,r=t.length;r--;){n=t.charCodeAt(r),o^=(o<<5)+n+(o>>2)}return 2147483647&o}function i(t,e,n,o){var r=!1,i=document.createElement("script"),a=document.getElementsByTagName("script")[0],s=document.head||document.getElementsByTagName("head")[0]||document.documentElement,l=s.getElementsByTagName("base")[0];o=o||{};var u;i.charset=o.charset||"gb2312",i.src=t,i.async=!0,i.onload=i.onreadystatechange=function(){if(!r&&(!i.readyState||/loaded|complete/.test(i.readyState))){if(u){var t=new Date-u,n=o.market.toLowerCase(),a=o.type.toLowerCase();T.sima({simadata:{cre:n,mod:a,during:t},symbol:o.symbol,type:o.type})}r=!0,i.onload=i.onreadystatechange=i.onerror=null,i.parentNode.removeChild(i),i=null,"function"==typeof e&&e()}},i.onerror=function(){if(u){var t=new Date-u,e=o.market.toLowerCase(),r=o.type.toLowerCase();T.sima({simadata:{cre:e,mod:r,during:t,error_type:"err"},symbol:o.symbol,type:o.type})}i.onload=i.onreadystatechange=i.onerror=null,i.parentNode.removeChild(i),i=null,"function"==typeof n&&n()},o.market&&o.type&&o.symbol&&(u=new Date),a.parentNode?a.parentNode.insertBefore(i,a):l?s.insertBefore(i,l):s.appendChild(i)}function a(){function t(t){var e=t.style;for(var n in e){e.hasOwnProperty(n)&&(t.dom.style[n]=e[n])}}function e(){for(var t=["@keyframes KKELoading","@-webkit-keyframes KKELoading","@-moz-keyframes KKELoading"],e=0,n=t.length;n>e;e++){u.cssUtil.inject(t[e]+l.scaleY)}}function n(){if(e(),!r){r=u.$C("div"),t({dom:r,style:l.ctn});for(var n=0.1,o=0,i=l.color.length;i>o;o++){var a=u.$C("span");t({dom:a,style:l.item});var s=u.clone(l.delay,s),c=-1+n*o+"s";for(var d in s){s.hasOwnProperty(d)&&(s[d]=c)}t({dom:a,style:s}),a.style.background=l.color[o],r.appendChild(a)}}}function o(){clearTimeout(a),a=setTimeout(function(){"none"!=r.style.display&&(r.style.display="none")},9000)}var r,i,a,s,l={ctn:{width:"40px",height:"30px",margin:0,display:"none",position:"absolute",zIndex:1},item:{display:"inline-block",width:"4px",height:"30px",margin:"0px 2px",borderRadius:"5px",animation:"KKELoading 1.2s infinite",webkitAnimation:"KKELoading 1.2s infinite",MozAnimation:"KKELoading 1.2s infinite"},color:["#FF5472","#FF706E","#FF8762","#FFAF4C","#FFD53E"],delay:{animationDelay:-1,webkitAnimationDelay:-1,MozAnimationDelay:-1},scaleY:"{0%,40%,100%{-moz-transform:scaleY(0.2);-webkit-transform:scaleY(0.2);transform:scaleY(0.2);}20%,60%{-moz-transform:scaleY(1);-webkit-transform:scaleY(1);transform:scaleY(1);}}"};n(),this.appendto=function(t,e){i=t,s=e,i.appendChild(r)},this.setPosition=function(){i&&i.offsetHeight>0?(r.style.top=(i.offsetHeight-m(l.ctn.height))/2+"px",r.style.left=(i.offsetWidth-m(l.ctn.width))/2+"px"):s&&s.DIMENSION.h_t&&(r.style.top=(s.DIMENSION.h_t-m(l.ctn.height))/2+"px",r.style.left=(s.DIMENSION._w-m(l.ctn.width))/2+"px")},this.show=function(){o(),r.style.display=""},this.hide=function(){clearTimeout(a),r.style.display="none"}}function s(t){t=t||{};var e,n,o,r,i,a,s=u.$C("div"),l=70,c=function(){clearTimeout(a),n&&(n.style.display="none",s.innerHTML=""),e&&f(e.closeCb)&&e.closeCb()},d=function(d){if(e=d,clearTimeout(a),!n){n=u.$C("div"),n.style.width="100%",n.style.height="100%",n.style.position="absolute",n.style.zIndex=l,n.style.top=0,n.style.textAlign="center",o=u.$C("div"),r=u.$C("div"),i=u.$C("span"),s.style.fontSize="12px",s.style.margin="9px auto",o.style.position="absolute",o.style.top=0,o.style.left=0,o.style.width="100%",o.style.height="100%",o.style.backgroundColor=t.TIP_ARR?t.TIP_ARR[2]||"#fff":"#fff",o.style.opacity=0.5,o.style.filter="alpha(opacity=50)",r.style.padding="1px 3px 10px",r.style.top=t.TIP_ARR?t.TIP_ARR[4]||"26%":"26%",r.style.position="relative",r.style.margin="0 auto",r.style.width="100%",i.style.cursor="pointer",i.style.display="block",i.style.margin="0 auto",i.style.lineHeight=i.style.height="28px",i.style.width="60px",i.style.fontSize="14px",i.style.borderRadius="3px",u.xh5_EvtUtil.addHandler(i,"click",c),r.appendChild(s);var h=!(!t.TIP_ARR||!t.TIP_ARR[3]);!h&&n.appendChild(o),n.appendChild(r)}n.style.display="",s.style.color="undefined"!=typeof d.fontColor?d.fontColor:t.TIP_ARR?t.TIP_ARR[1]||"#fff":"#fff";var f=t.TIP_ARR?t.TIP_ARR[0]||"#000":"#000";if(r.style.backgroundColor=u.xh5_BrowserUtil.noH5?f:u.hex2dec(f,0.8),d.bgStyle){for(var p in d.bgStyle){d.bgStyle.hasOwnProperty(p)&&(r.style[p]=d.bgStyle[p])}}if(s.innerHTML=d.txt||"",d.content&&s.appendChild(d.content),!isNaN(d.autoHide)&&d.autoHide>0&&setTimeout(c,1000*d.autoHide),d.noBtn?u.$CONTAINS(r,i)&&r.removeChild(i):(i.innerHTML=d.btnLb||"\u786e\u5b9a",i.style.background=t.BTN_ARR?t.BTN_ARR[0]||"#2b9dfc":"#2b9dfc",i.style.color=t.BTN_ARR?t.BTN_ARR[1]||"#fff":"#fff",!u.$CONTAINS(r,i)&&r.appendChild(i)),d.extraBtn){for(var g=0,v=d.extraBtn,m=v.length;
m>g;g++){var y=v[g],b=u.$C("input");b.type="button",b.value=y.value,b.style.marginTop="20px",b.style.cursor="pointer",u.xh5_EvtUtil.addHandler(b,"click",y.onClk),r.appendChild(b)}}return d.parent.appendChild(n),n};this.genTip=d,this.hide=c}function l(){var t="hq";return location.hostname.indexOf("sina.cn")>-1&&(t="w",location.pathname.indexOf("appchart")>-1&&(t="a")),t}this.VER="2.3.5";var u=this,c=function(t){return function(e){return{}.toString.call(e)=="[object "+t+"]"}},d=c("Object"),h=c("String"),f=c("Function"),p=c("Array"),g=c("Number"),v=c("Date");this.isObj=d,this.isStr=h,this.isFunc=f,this.isArr=p,this.isNum=g,this.isDate=v;var m=function(t){return parseInt(t,10)};this.uz=function(b){var m=String.fromCharCode;var s=window.atob(b);var c=s.split("").map(function(x){return x.charCodeAt(0)});var bd=new Uint8Array(c);var ar=pako.inflate(bd);var r="";var ck=8*1024;var i;if(typeof(ar.slice)=="undefined"||ar.slice==undefined){for(i=0;i<ar.length/ck;i++){r+=m.apply(null,ar.subarray(i*ck,(i+1)*ck))}r+=m.apply(null,ar.subarray(i*ck))}else{for(i=0;i<ar.length/ck;i++){r+=m.apply(null,ar.slice(i*ck,(i+1)*ck))}r+=m.apply(null,ar.slice(i*ck))}return r};this.uae=function(t){for(var e,n=[],o={},r=0,i=t.length;i>r;r++){e=t[r],1!==o[e]&&(o[e]=1,n[n.length]=e)}return n};var y=new function(){var t;if(XMLHttpRequest){t=new XMLHttpRequest}else{if(ActiveXObject){try{t=new ActiveXObject("MSXML2.XMLHTTP")}catch(e){try{t=new ActiveXObject("Microsoft.XMLHTTP")}catch(n){}}}}this.send=function(e,n,o,r){if(!t||!e){return void (o&&o("error while sending"))}if(e+=e.indexOf("?")<0?"?":"&",e+="_="+(new Date).getTime(),r=r||"POST",t.onreadystatechange=function(){if(4==t.readyState){var e;200==t.status&&(e=t.responseText),o&&o(e)}},t.open(r,e,!0),"POST"==r){t.setRequestHeader("Content-Type","application/x-www-form-urlencoded;");var i="";for(var a in n){n.hasOwnProperty(a)&&(i+=[encodeURIComponent(a),encodeURIComponent(n[a])].join("=")+"&")}t.send(i)}else{t.send(null)}}};this.POST="undefined"!=typeof jQuery&&jQuery.post?jQuery.post:y.send,this.trace=function(t){return{log:function(){t&&t.log&&t.log.apply(t,arguments)},error:function(){t&&t.error&&t.error.apply(t,arguments)}}}(null);var b=function(t,e){var n=-1;if(t.indexOf){n=t.indexOf(e)}else{for(var o=t.length;o--;){if(t[o]===e){n=o;break}}}return n};this.arrIndexOf=b;var x=function(t,e){if(null==t||"object"!=typeof t){return t}if(t.constructor==Date||t.constructor==RegExp||f(t)||h(t)||t.constructor==Number||t.constructor==Boolean){return new t.constructor(t)}e=e||new t.constructor;for(var n in t){t.hasOwnProperty(n)&&(e[n]="undefined"==typeof e[n]?x(t[n],null):e[n])}return e};this.clone=x;var w=function(t){if(!t){return t}var e={};for(var n in t){t.hasOwnProperty(n)&&(e[n]=t[n])}return e};this.co=w,this.oc=function(t,e){if(!t){return e}for(var n in e){e.hasOwnProperty(n)&&(t[n]=d(t[n])&&d(e[n])?arguments.callee(t[n],e[n]):e[n])}return t};var N=function(t){function e(){}return e.prototype=t,new e};this.fInherit=t,this.urlUtil=new function(){this.getUrlParam=function(){var t,e={};try{t=location.search.substring(1)}catch(n){}if(t){for(var o,r,i,a=t.split("&"),s=a.length,l=0;s>l;l++){i=a[l].indexOf("="),-1!=i&&(o=a[l].substring(0,i),r=a[l].substring(i+1),e[o]=r)}}return e},this.getMainUrl=function(){return window.location!=window.parent.location?document.referrer:document.location.href}},this.xh5_BrowserUtil=new function(){this.info=function(){var t,e=navigator.userAgent,n=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?(t=/\brv[ :]+(\d+)/g.exec(e)||[],{name:"IE ",version:t[1]||""}):"Chrome"===n[1]&&(t=e.match(/\bOPR\/(\d+)/),null!=t)?{name:"Opera",version:t[1]}:(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(t=e.match(/version\/(\d+)/i))&&n.splice(1,1,t[1]),{name:n[0],version:n[1]})}(),this.noH5=!1,this.hdpr=function(t){var e=document.createElement("canvas");if(e.getContext&&e.getContext("2d")){var n=Math.ceil(window.devicePixelRatio||1),o=e.getContext("2d").webkitBackingStorePixelRatio||1;return n/o}return t.noH5=!0,1}(this)},this.xh5_deviceUtil=function(){return{istd:function(){if("ontouchend" in window){var t;try{t=navigator.userAgent}catch(e){}return t&&t.indexOf("Windows NT")>0?!1:!0}return !1}(),allowt:"ontouchend" in window}}();var A=function(){function t(t){return t=JSON.stringify(t),t||(t=""),t=encodeURIComponent(t)}function e(t){try{t=JSON.parse(t)}catch(e){t=decodeURIComponent(t)}return t}function n(e,n,o){if(o=o||{},void 0!=e&&void 0!=n){var r,i,a,s;i=o.path?"; path="+o.path:"",a=o.domain?"; domain="+o.domain:"",s=o.secure?"; secure":"";var l,c=o.expires;switch(u(c)){case"Number":l=new Date,l.setTime(l.getTime()+1000*c);break;case"String":l=new Date(c),"Invalid Date"==l&&(l="");break;case"Date":l=c}r=l?"; expires="+l.toUTCString():"",document.cookie=[encodeURIComponent(e),"=",t(n),r,i,a,s].join("")}}function o(t){var n=document.cookie.match("(?:^|;)\\s*"+encodeURIComponent(t)+"=([^;]*)");return n?e(n[1])||"":null
}function r(t){document.cookie=encodeURIComponent(t)+"=;expires="+new Date(0).toUTCString()}function i(e,n){void 0!=e&&void 0!=n&&localStorage.setItem(encodeURIComponent(e),t(n))}function a(t){var n=localStorage.getItem(encodeURIComponent(t));return e(n)}function s(t){localStorage.removeItem(encodeURIComponent(t))}var l=Object.prototype.toString,u=function(t){return null===t?"Null":void 0===t?"Undefined":l.call(t).slice(8,-1)},c=function(){if("object"==typeof localStorage&&localStorage&&localStorage.setItem){var t="KKE_LOCALSTORAGE_TESTing";try{return localStorage.removeItem(t),localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(e){return !1}}return !1}();return{hasls:c,save:function(t,e,o){o=o||{};var r=o.mode;if(r){switch(r){case"localStorage":if(!c){return}i(t,e);break;case"cookie":n(t,e,o)}}else{if(c){try{s(t),i(t,e)}catch(a){}}else{n(t,e,o)}}},load:function(t,e){var n;if("Object"==u(e)&&(e=e.mode),e){switch(e){case"localStorage":if(!c){return}n=a(t);break;case"cookie":n=o(t)}}else{c&&(n=a(t)),!n&&(n=o(t))}return n},remove:function(t,e){if("Object"==u(e)&&(e=e.mode),e){switch(e){case"localStorage":if(!c){return}s(t);break;case"cookie":r(t)}}else{c&&s(t),r(t)}},clear:function(t){c&&s(t)}}}();this.localSL=A,this.xh5_EvtUtil={addHandler:function(t,e,n){t&&(t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n)},removeHandler:function(t,e,n){t&&(t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null)},getEvent:function(t){return t?t:window.event},getTarget:function(t){return !t&&(t=this.getEvent()),t?t.target||t.srcElement:null},preventDefault:function(t){!t&&(t=this.getEvent()),t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(t){!t&&(t=this.getEvent()),t&&(t.stopPropagation?t.stopPropagation():t.cancelBubble=!0)},getRelatedTarget:function(t){return !t&&(t=this.getEvent()),t.relatedTarget?t.relatedTarget:t.toElement?t.toElement:t.fromElement?t.fromElement:null},getWheelDelta:function(t){return !t&&(t=this.getEvent()),t?t.wheelDelta?client.engine.opera&&client.engine.opera<9.5?-t.wheelDelta:t.wheelDelta:40*-t.detail:0}},e.prototype.al=function(t,e,n){n&&this.evtObj[t]||(!this.evtObj[t]&&(this.evtObj[t]=[]),this.evtObj[t].push(e))},e.prototype.rl=function(t,e){var n=this.evtObj[t];if(p(n)){for(var o=n.length;o--;){n[o]==e&&n.splice(o,1)}}},e.prototype.re=function(t,e){var n=this.evtObj[t];if(p(n)){for(var o=0,r=n.length;r>o;o++){"function"==typeof n[o]&&n[o](t,e)}}},this.xh5_EvtDispatcher=e,this.$DOM=function(t,e){return e=e||document,e.getElementById(t)},this.$C=function(t,e){var n=document.createElement(t);return e&&(n.id=e),n},this.$T=function(t){return document.createTextNode(t)},this.$CONTAINS=function(t,e){if(t.compareDocumentPosition){return t===e||!!(16&t.compareDocumentPosition(e))}if(t.contains&&1===e.nodeType){return t.contains(e)&&t!==e}for(;e=e.parentNode;){if(e===t){return !0}}return !1},this.getTextNodes=function(t){var e=[];for(t=t.firstChild;t;t=t.nextSibling){3==t.nodeType?e.push(t):e=e.concat(arguments.callee(t))}return e},this.getCSS=function(t){var e=null;return e=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle},this.fBind=n,this.isColor=function(t){return/^#[0-9a-fA-F]{3,6}$/.test(t)},this.isColorRGB=function(t){return/(^#[0-9a-fA-F]{3,6}$)|(^rgba?\(.{5,16}\)$)/.test(t)},this.randomColor=function(){for(var t=Math.floor(16777215*Math.random()).toString(16);t.length<6;){t+="0"}return t},this.hex2dec=function(t,e,n){if(0==t.indexOf("rgb")){return t}t=t.replace(/#|0x/i,"");var o,r,i;t.replace(/(\w{6})|(\w{3})/,function(e,n,a){if(n){o=t.slice(0,2),r=t.slice(2,4),i=t.slice(4)}else{if(!a){return[0,0,0]}var s=t.split("");o=s[0],o+=String(o),r=s[1],r+=String(r),i=s[2],i+=String(i)}});var a;return isNaN(e)?(a=[parseInt(o,16),parseInt(r,16),parseInt(i,16)],n?a:"rgb($color)".replace("$color",a.join(","))):(a=[parseInt(o,16),parseInt(r,16),parseInt(i,16),e],n?a:"rgba($color)".replace("$color",a.join(",")))},this.getTimestamp=o,this.cssUtil={inject:function(t){var e=document.createElement("style"),n=document.head||document.getElementsByTagName("head")[0]||document.documentElement;e.type="text/css",e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t)),n.appendChild(e)},adCls:function(t,e){if(t.className!=e){var n=t.className.split(" ");for(var o in n){if(n.hasOwnProperty(o)&&n[o]==e){return}}""==t.className?t.className=e:t.className+=" "+e}},rmCls:function(t,e){if(-1!=t.className.indexOf(e)){if(t.className==e){t.className=""}else{var n=t.className.split(" "),o="";for(var r in n){if(n.hasOwnProperty(r)){if(n[r]==e){continue}""!=o&&(o+=" "),o+=n[r]}}t.className=o}}}},this.load=i;var C,k=new function(){var t=C||{};C=t;var e=function(e,n){for(var o=t[e][n?"errCbArr":"cbArr"],r=o.length;r--;){var i=o[r];f(i)&&i()}t[e]=null,delete t[e]};this.load=function(o,a,s,l){var u="urlhash_"+r(o);for(var c in t){if(t.hasOwnProperty(c)&&c==u){return t[c].cbArr.push(a),void t[c].errCbArr.push(s)
}}t[u]={url:o,cbArr:[a],errCbArr:[s]},i(o,n(e,this,u),n(e,this,u,!0),l)}};this.relyLoader=k,this.iframer=function(t,e){function n(){if(document&&document.body){clearInterval(r),a=0;var t=document.body;t.insertBefore(o,t.firstChild),o.setAttribute("data-ready","1")}else{a++>9&&(clearInterval(r),f(e)&&e())}}var o,r,i=t.attribute?t.attribute.id||"_kkeiframe"+(new Date).getTime():"_kkeiframe"+(new Date).getTime(),a=0;if(!(o=document.getElementById(i))){if(o=document.createElement("iframe"),o.setAttribute("data-ready","0"),t.attribute){for(var s in t.attribute){t.attribute.hasOwnProperty(s)&&(o[s]=t.attribute[s])}}if(o.style.height=o.style.width=0,o.style.borderStyle="none",o.style.position="absolute",o.style.zIndex=-9,o.style.display="none",t.style){for(var l in t.style){t.style.hasOwnProperty(l)&&(o.style[l]=t.style[l])}}r=setInterval(n,500),n()}return o},this.ca=function(t){if(t){for(;t.length>0;){t.length--}}},this.isRepos=function(t){return/^(sh204\d{3}|sz1318\d{2})$/.test(t)},this.market=function(t){return"forex"},this.cookieUtil={escape:function(t){return t.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},get:function(t){var e=document.cookie.match("(?:^|;)\\s*"+this.escape(t)+"=([^;]*)");return e?e[1]||"":""},set:function(t,e,n){!n&&(n={}),e||(e="",n.expires=-1);var o="";if(n.expires&&(Number(n.expires)||n.expires.toUTCString)){var r;Number(n.expires)?(r=new Date,r.setTime(r.getTime()+1000*n.expires)):r=n.expires,o="; expires="+r.toUTCString()}var i=n.path?"; path="+n.path:"",a=n.domain?"; domain="+n.domain:"",s=n.secure?"; secure":"";document.cookie=[t,"=",e,o,i,a,s].join("")}};var T=new function(){function t(e){i(e.url,function(){for(var t=e.f();t&&e.q.length;){var n=e.q.shift();t.apply(null,n)}},function(){--e.count&&t(e),e.count<1&&(e.q=[])})}function e(e){setTimeout(function(){var n=!!e.f();!n&&t(e)},2000)}function n(t){if("undefined"!=typeof SIMA){for(var e,n=s.length;n--;){if(e=s[n],e.symbol==t.symbol&&e.type==t.type){return}}s.push(t)}var o=t.simadata,r={action:"hq",data:o,pk:"179824"};try{SIMA(r)}catch(i){a.count&&a.q.push([t])}}var o=navigator.userAgent||"unknownUa";o=encodeURIComponent("_UA_"+o);var r={url:"",q:[],count:5,f:function(){return void 0}},a={url:"",q:[],count:5,f:function(){return"undefined"==typeof SIMA?void 0:n}};e(a),e(r);var s=[];this.sima=n;var l,u,c=[],d=function(){for(var t,e="chart_finance",n="",i=",",a="",s=0,u=c.length;u>s;s++){t=c[s],a+=[t.k,t.v].join(n)+i}for(;c.length;){c.length--}if(a!==l){l=a,a+=o;try{SUDA.uaTrack(e,a)}catch(d){r.count&&r.q.push([e,a])}}};this.s=function(t,e,n){if(t){(isNaN(n)||0>n)&&(n=3000),e=JSON.stringify(e),e||(e=""),e=encodeURIComponent(e);for(var o=c.length;o--;){if(c[o].k==t){c.splice(o,1);break}}c.push({k:t,v:e}),clearTimeout(u),u=setTimeout(d,n)}};var h,f;this.s2=function(t,e,n){},this.log=function(){}};this.sudaLog=T.log,this.stc=T.s,this.suda=T.s2,this.xh5_PosUtil={pp:function(t,e,n,o){return isNaN(t)||e>=t?o:t>=n?1:Math.max(o*(1-(t-e)/(n-e)),1)},ppp:function(t,e,n,o,r){return t=(t-r)/r,this.pp(t,e,n,o)},vp:function(t,e,n){return isNaN(t)||0>=t?n-1:n*(1-t/e)}},this.xh5_HtmlPosUtil={pageX:function(t){return t.offsetParent?t.offsetLeft+this.pageX(t.offsetParent):t.offsetLeft},pageY:function(t){return t.offsetParent?t.offsetTop+this.pageY(t.offsetParent):t.offsetTop},parentX:function(t){return t.parentNode==t.offsetParent?t.offsetLeft:this.pageX(t)-this.pageX(t.parentNode)},parentY:function(t){return t.parentNode==t.offsetParent?t.offsetTop:this.pageY(t)-this.pageY(t.parentNode)}},this.xh5_ADJUST_HIGH_LOW=new function(){var t=function(t){var e=parseInt(Math.round(100*t));return e%100!=0&&(e%10==0&&(e*=0.1),e%5!=0&&e%2!=0)?!0:!1},e=function(t,e){if(e){for(;t>5;){if(t%2==0){t*=0.5}else{if(t%3!=0){break}t/=3}}}else{t>9&&(t%3==0?t/=3:t%4==0?t*=0.25:t%2==0&&(t*=0.5))}return t};this.c=function(n,o,r,i,a,s){if(isNaN(n)||isNaN(o)||o>n){return[0,0,0]}isNaN(s)||(s=(n-o)*s,n+=s,o-=s);for(var l,u,c,d,h,f,p,g,v,m,y,b,x,w,N=-0.000001,A=0.5*(o+n),C=i?[4,5,6,8,9,10,12,15,16,18,20]:[4,5,6,7,8,9,10,12,14,15,16,18,20],k=[1,2,3,4,5,6,8],T=!1,S=k.length,P=0,H=C.length;H>P;P++){for(T=!1,x=C[P],c=(n-o)/x,g=Math.pow(10,0-r);!T;){for(w=0;S>w;w++){if(d=g*k[w],d-c>N&&(1&x?(h=Math.round((A+0.5*d)/d)*d,y=(h+0.5*(x-1)*d).toFixed(5),b=(h-0.5*(x+1)*d).toFixed(5)):(h=Math.round(A/d)*d,y=(h+0.5*x*d).toFixed(5),b=(h-0.5*x*d).toFixed(5)),f=Number(y),p=Number(b),f-n>N&&N>p-o)){if(T=!0,0>p&&!a&&(f-=p,p=0),!v){v=f-p,l=f,u=p,m=x;break}var D=(f-p)/e(x);if(1!=Math.round(100*D)&&1!=Math.round(10*D)&&t(D)){break}if(f-p>v){break}if(f-p==v){var F=l-n,O=o-u,M=Math.abs(F-O);F=f-n,O=o-p;var L=Math.abs(F-O);if(L>=M){break}}if(t(f)){break}if(t(p)){break}v=f-p,l=f,u=p,m=x;break}}g*=10}}return m=e(m,i),[l,u,m]}},this.xh5_S_KLC_D=function(t){var e,n,o,r,i,a,s,l=86400000,u=7657,c=[],d=[],h=~(3<<30),f=1<<30,p=[0,3,5,6,9,10,12,15,17,18,20,23,24,27,29,30],g=Math,v=function(){var l,u;for(l=0;64>l;l++){d[l]=g.pow(2,l),26>l&&(c[l]=m(l+65),c[l+26]=m(l+97),10>l&&(c[l+52]=m(l+48)))}for(c.push("+","/"),c=c.join(""),n=t.split(""),o=n.length,l=0;
o>l;l++){n[l]=c.indexOf(n[l])}return r={},e=a=0,i={},u=w([12,6]),s=63^u[1],{_1479:k,_136:C,_200:A,_139:T,_197:S}["_"+u[0]]||function(){return[]}},m=String.fromCharCode,y=function(t){return t==={}._},b=function(){var t,e;for(t=x(),e=1;;){if(!x()){return e*(2*t-1)}e++}},x=function(){var t;return e>=o?0:(t=n[e]&1<<a,a++,a>=6&&(a-=6,e++),!!t)},w=function(t,r,i){var s,l,u,c,h;for(l=[],u=0,r||(r=[]),i||(i=[]),s=0;s<t.length;s++){if(c=t[s],u=0,c){if(e>=o){return l}if(t[s]<=0){u=0}else{if(t[s]<=30){for(;h=6-a,h=c>h?h:c,u|=(n[e]>>a&(1<<h)-1)<<t[s]-c,a+=h,a>=6&&(a-=6,e++),c-=h,!(0>=c);){}r[s]&&u>=d[t[s]-1]&&(u-=d[t[s]])}else{u=w([30,t[s]-30],[0,r[s]]),i[s]||(u=u[0]+u[1]*d[30])}}l[s]=u}else{l[s]=0}}return l},N=function(t){var e,n,o,i;for(t>1&&(e=0),e=0;t>e;e++){r.d++,o=r.d%7,(3==o||4==o)&&(r.d+=5-o)}return n=new Date,i=60*n.getTimezoneOffset()*1000,n.setTime((u+r.d)*l+i),n.setHours(n.getHours()+8),n},A=function(){var t,n,i,a,l;if(s>=1){return[]}for(r.d=w([18],[1])[0]-1,i=w([3,3,30,6]),r.p=i[0],r.ld=i[1],r.cd=i[2],r.c=i[3],r.m=g.pow(10,r.p),r.pc=r.cd/r.m,n=[],t=0;a={d:1},x()&&(i=w([3])[0],0==i?a.d=w([6])[0]:1==i?(r.d=w([18])[0],a.d=0):a.d=i),l={date:N(a.d)},x()&&(r.ld+=b()),i=w([3*r.ld],[1]),r.cd+=i[0],l.close=r.cd/r.m,n.push(l),!(e>=o)&&(e!=o-1||63&(r.c^t+1));t++){}return n[0].prevclose=r.pc,n},C=function(){var t,n,i,a,l,u,c,d,h,f,p;if(s>=2){return[]}for(c=[],h={v:"volume",p:"price",a:"avg_price"},r.d=w([18],[1])[0]-1,d={date:N(1)},i=w(1>s?[3,3,4,1,1,1,5]:[4,4,4,1,1,1,3]),t=0;7>t;t++){r[["la","lp","lv","tv","rv","zv","pp"][t]]=i[t]}for(r.m=g.pow(10,r.pp),s>=1?(i=w([3,3]),r.c=i[0],i=i[1]):(i=5,r.c=2),r.pc=w([6*i])[0],d.pc=r.pc/r.m,r.cp=r.pc,r.da=0,r.sa=r.sv=0,t=0;!(e>=o)&&(e!=o-1||7&(r.c^t));t++){for(l={},a={},f=r.tv?x():1,n=0;3>n;n++){if(p=["v","p","a"][n],(f?x():0)&&(i=b(),r["l"+p]+=i),u="v"==p&&r.rv?x():1,i=w([3*r["l"+p]+("v"==p?7*u:0)],[!!n])[0]*(u?1:100),a[p]=i,"v"==p){if(!(l[h[p]]=i)&&241>t&&(r.zv?!x():1)){a.p=0;break}}else{"a"==p&&(r.da=(1>s?0:r.da)+a.a)}}r.sv+=a.v,l[h.p]=(r.cp+=a.p)/r.m,r.sa+=a.v*r.cp,l[h.a]=y(a.a)?t?c[t-1][h.a]:l[h.p]:r.sv?((g.floor((r.sa*(2000/r.m)+r.sv)/r.sv)>>1)+r.da)/1000:l[h.p]+r.da/1000,c.push(l)}return c[0].date=d.date,c[0].prevclose=d.pc,c},k=function(){var t,e,n,o,i,a,l;if(s>=1){return[]}for(r.lv=0,r.ld=0,r.cd=0,r.cv=[0,0],r.p=w([6])[0],r.d=w([18],[1])[0]-1,r.m=g.pow(10,r.p),i=w([3,3]),r.md=i[0],r.mv=i[1],t=[];i=w([6]),i.length;){if(n={c:i[0]},o={},n.d=1,32&n.c){for(;;){if(i=w([6])[0],63==(16|i)){l=16&i?"x":"u",i=w([3,3]),n[l+"_d"]=i[0]+r.md,n[l+"_v"]=i[1]+r.mv;break}if(32&i){a=8&i?"d":"v",l=16&i?"x":"u",n[l+"_"+a]=(7&i)+r["m"+a];break}if(a=15&i,0==a?n.d=w([6])[0]:1==a?(r.d=a=w([18])[0],n.d=0):n.d=a,!(16&i)){break}}}o.date=N(n.d);for(a in {v:0,d:0}){y(n["x_"+a])||(r["l"+a]=n["x_"+a]),y(n["u_"+a])&&(n["u_"+a]=r["l"+a])}for(n.l_l=[n.u_d,n.u_d,n.u_d,n.u_d,n.u_v],l=p[15&n.c],1&n.u_v&&(l=31-l),16&n.c&&(n.l_l[4]+=2),e=0;5>e;e++){l&1<<4-e&&n.l_l[e]++,n.l_l[e]*=3}n.d_v=w(n.l_l,[1,0,0,1,1],[0,0,0,0,1]),a=r.cd+n.d_v[0],o.open=a/r.m,o.high=(a+n.d_v[1])/r.m,o.low=(a-n.d_v[2])/r.m,o.close=(a+n.d_v[3])/r.m,i=n.d_v[4],"number"==typeof i&&(i=[i,i>=0?0:-1]),r.cd=a+n.d_v[3],l=r.cv[0]+i[0],r.cv=[l&h,r.cv[1]+i[1]+!!((r.cv[0]&h)+(i[0]&h)&f)],o.volume=(r.cv[0]&f-1)+r.cv[1]*f,t.push(o)}return t},T=function(){var t,e,n,o;if(s>1){return[]}for(r.l=0,o=-1,r.d=w([18])[0]-1,n=w([18])[0];r.d<n;){e=N(1),0>=o?(x()&&(r.l+=b()),o=w([3*r.l],[0])[0]+1,t||(t=[e],o--)):t.push(e),o--}return t},S=function(){var t,n,i,a;if(s>=1){return[]}for(r.f=w([6])[0],r.c=w([6])[0],i=[],r.dv=[],r.dl=[],t=0;t<r.f;t++){r.dv[t]=0,r.dl[t]=0}for(t=0;!(e>=o)&&(e!=o-1||7&(r.c^t));t++){for(a=[],n=0;n<r.f;n++){x()&&(r.dl[n]+=b()),r.dv[n]+=w([3*r.dl[n]],[1])[0],a[n]=r.dv[n]}i.push(a)}return i};return v()()};var S={dd:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate())},ddt:function(t){return new Date(t.getTime())},stbd:function(t,e){return t&&e&&t.getFullYear()==e.getFullYear()&&t.getMonth()==e.getMonth()?t.getDate()==e.getDate():!1},stbdt:function(t,e){return t&&e?t.getTime()==e.getTime():!1},stbs:function(t,e,n,o){return t.getFullYear()==e&&t.getMonth()==n?t.getDate()==o:!1},stbds:function(t,e,n){!n&&(n="-");var o=e.split(n);return this.stbs(t,Number(o[0]),Number(o[1])-1,Number(o[2]))},ds:function(t,e,n,o,r,i){"undefined"==typeof e&&(e="-");var a=[];if(o||a.push(t[n?"getUTCFullYear":"getFullYear"]()),!r){var s=t[n?"getUTCMonth":"getMonth"]()+1;a.push(10>s?"0"+s:s)}if(!i){var l=t[n?"getUTCDate":"getDate"]();a.push(10>l?"0"+l:l)}return a.join(e)},dss:function(t,e,n){var o=this.ds(t,e,n),r=[t["get"+(n?"UTC":"")+"Hours"]()],i=[t["get"+(n?"UTC":"")+"Minutes"]()],a=[t["get"+(n?"UTC":"")+"Seconds"]()],s=[10>r?"0"+r:r,10>i?"0"+i:i,10>a?"0"+a:a].join(":");return[o,s].join(" ")},dst:function(t,e,n){var o=[t["get"+(n?"UTC":"")+"Hours"]()],r=[t["get"+(n?"UTC":"")+"Minutes"]()],i=[10>o?"0"+o:o,10>r?"0"+r:r];if(e){var a=[t["get"+(n?"UTC":"")+"Seconds"]()];i.push(10>a?"0"+a:a)}return i.join(":")},sd:function(t,e){var n=t.split("-"),o=n[0],r=n[1]-1||0,i=n[2]||1,a=0,s=0,l=0;
return e&&(n=e.split(":"),a=n[0]||0,s=n[1]||0,l=n[2]||0),new Date(o,r,i,a,s,l)},ssd:function(t){var e=t.split(" "),n=e[0],o=e[1];return this.sd(n,o)},gw:function(t,e){var n=604800000,o=259200000,r=(t.getTime()-o)/n,i=(e.getTime()-o)/n;return Math.floor(r)==Math.floor(i)},gm:function(t,e){return t.getFullYear()==e.getFullYear()?t.getMonth()==e.getMonth():!1},weekname:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u65e5"],nw:function(t){return this.weekname[t]||""}};this.dateUtil=S,this.LoadingSign=a;var P={trim:function(t){return t.replace(/^[\s\xA0]+/,"").replace(/[\s\xA0]+$/,"")},ps:function(t,e){if(t=Number(t),isNaN(t)){return"-"}var n=Math.abs(t);return 100000>n?t.toFixed(e):10000000>n?(t/10000).toFixed(e)+"\u4e07":100000000>n?(t/10000000).toFixed(e)+"\u5343\u4e07":(t/100000000).toFixed(e)+"\u4ebf"},nu:function(t){return t=Number(t),t=Math.abs(t),100000>t||isNaN(t)?[1,""]:10000000>t?[10000,"\u4e07"]:100000000>t?[10000000,"\u5343\u4e07"]:[100000000,"\u4ebf"]},vs:function(t,e){var n,o="";return t>1000000000000?(n=(t/1000000000000).toFixed(0),o="\u4e07\u4ebf"):t>100000000?(n=(t/100000000).toFixed(2),o="\u4ebf"):t>100000?(n=(t/10000).toFixed(2),o="\u4e07"):n=t>=1?t.toFixed(0):"-",e?n+o:n},zp:function(t){return t=String(t),t.length<2?"0"+t:t}};this.strUtil=P,this.tUtil={s0:function(t){return t=parseInt(Number(t)),0>t?"":10>t?"0"+String(t):String(t)},tIWS:function(t,e){for(var n=[],o=t;e>=o;o++){n.push(this.s0(o/60)+":"+this.s0(o%60))}return n},gtr:function(t){for(var e,n,o,r,i,a=[],s=0,l=t.length;l>s;s++){e=t[s][0],n=t[s][1],o=60*Number(e.split(":")[0])+Number(e.split(":")[1]),r=60*Number(n.split(":")[0])+Number(n.split(":")[1]),i=this.tIWS(o,r),a=a.concat(i)}return a},tradingA:[],gta:function(){return this.tradingA.length||(this.tradingA=this.gtr([["9:30","11:29"],["13:00","15:00"]])),this.tradingA},tradingUs:[],gtus:function(){return this.tradingUs.length||(this.tradingUs=this.gtr([["9:30","16:00"]])),this.tradingUs},tradingHk:[],gthk:function(){return this.tradingHk.length||(this.tradingHk=this.gtr([["09:30","11:59"],["13:00","16:00"]])),this.tradingHk},trading:[],gtAll:function(t){return this.trading=this.gtr(t),this.trading},gata:function(t,e){var n;switch(t){case"US":n=this.gtus();break;case"HK":n=this.gthk();break;case"NF":n=this.gtAll(e);break;case"forex":n=this.gtAll(e);break;case"HF":case"global_index":e=e||[["00:00","23:59"]];n=this.gtAll(e);break;default:case"CN":n=this.gta()}return n},ist:function(t,e){return t=t.toUpperCase(),b(this.gata(t),e)>=0},gltbt:function(t,e,n,o,r,i){for(var a,s=[],l=this.gata(o,i),u=l.length,c=0,d=0,h=t*u;h>c;c++){a={time:l[c%u],price:0,percent:0,avg_price:0,volume:-0.01,inventory:0},c%u==0&&r&&(a.date=r[d],d++),s.push(a),n||(s[c].price=s[c].avg_price=e)}return s[0].price=s[0].avg_price=s[0].prevclose=e,s[0].volume=s[0].totalVolume=s[0].totalAmount=0,s[0].inventory=0,s},azft:function(t,e){if(!t){return t}for(var n=this.gata(e),o=0,r=t.length;r>o;o++){t[o].time=n[o]}return t[0].date.setHours(0),t}},this.kUtil={mw:function(t,e,n,o,r){"number"!=typeof o&&(o=0);var i=t.length,a=t[0];o>1&&(a.volume/=o);var s,l=[],u=[];if(1==i){l[0]={open:e.open,high:e.high,low:e.low,close:e.price,volume:e.totalVolume,date:S.dd(e.date)},u[0]={open:e.open,high:e.high,low:e.low,close:e.price,volume:e.totalVolume,date:S.dd(e.date)}}else{for(var c,d=a.open,h=a.high,f=a.low,p=a.close,g=a.volume,v=a.date,m=a.open,y=a.high,b=a.low,x=a.close,w=a.volume,N=a.date,A=1;i>A;A++){a=t[A],o>1&&(a.volume/=o),S.gw(t[A-1].date,a.date)?(a.high>h&&(h=a.high),a.low<f&&(f=a.low),p=a.close,g+=a.volume,v=a.date):(isNaN(r)||(s=v.getDay(),0==s&&(s=7),c=s-r,c>0&&(v=S.ddt(v),v.setDate(v.getDate()-c))),l.push({open:d,high:h,low:f,close:p,volume:g,date:v}),d=a.open,h=a.high,f=a.low,p=a.close,g=a.volume,v=a.date),S.gm(t[A-1].date,a.date)?(a.high>y&&(y=a.high),a.low<b&&(b=a.low),x=a.close,w+=a.volume,N=a.date):(isNaN(r)||(s=N.getDay(),0==s&&(s=7),c=s-r,c>0&&(N=S.ddt(N),N.setDate(N.getDate()-c))),u.push({open:m,high:y,low:b,close:x,volume:w,date:N}),m=a.open,y=a.high,b=a.low,x=a.close,w=a.volume,N=a.date),A==i-1&&(l.push({open:d,high:h,low:f,close:p,volume:g,date:v}),u.push({open:m,high:y,low:b,close:x,volume:w,date:N}))}}return l[0].prevclose=n,u[0].prevclose=n,[l,u]},nc:function(t,e,n,o){if(t&&!(t.length<1)){o=o||{};var r=t[t.length-1];if(168==n&&S.gw(r.date,e.date)||720==n&&S.gm(r.date,e.date)){return r.day=String(e.today).split("-").join("/"),void (r.date=S.dd(e.date))}r=t[t.length-1];var i=r.close,a=e.price-i,s=a/i;t.push({open:isNaN(o.price)?i:o.price,high:isNaN(o.price)?e.high:o.price,low:isNaN(o.price)?e.low:o.price,close:isNaN(o.price)?e.price:o.price,volume:isNaN(o.volume)?e.totalVolume:o.volume,percent:s,day:String(e.today).split("-").join("/"),date:S.ddt(e.date),time:e.time,ampP:0,amplitude:0,change:a,kke_cs:0})}},pd:function(t,e){var n=t.length,o=t[0],r=o.prevclose;(isNaN(r)||0>=r)&&(r=o.open);for(var i=0;n>i;i++){if(o=t[i],e&&e.usePc&&(r=o.prevclose),o.amplitude=o.high-o.low,o.ampP=o.amplitude/r,o.change=o.close-r,o.percent=o.change/r,r=o.close,o.day){var a=o.day.split(" ");
o.day=a[0],o.time=a[1].slice(0,5),o.date=S.sd(o.day,o.time),o.day=o.day.split("-").join("/")}else{var s=o.date,l=P.zp(s.getMonth()+1),u=P.zp(s.getDate());o.day=[s.getFullYear(),l,u].join("/")}o.kke_cs=o.close>o.open?1:o.open>o.close?-1:0}},ms:function(t,e,n,o,r){return n>t&&(t+=24),Math.max(1,Math.ceil((60*(t-n)+e-o)/r))},spk:function(t,e,n,o,r){if(t==e){return !0}var i=t.split(":"),a=Number(i[0]),s=Number(i[1]);i=e.split(":");var l=Number(i[0]),u=Number(i[1]);if(a>l&&3>a-l||a==l&&s>=u){return !0}if(60!=o||r&&/^forex/.test(r)){i=n.split(":");var c=Number(i[0]),d=Number(i[1]),h=this.ms(a,s,c,d,o),f=this.ms(l,u,c,d,o);return h==f}return"10:30"!=t&&"11:30"!=t&&"14:00"!=t&&"15:00"!=t||u==s?!0:!1},yd:function(t){for(var e=t[t.length-1].date.getFullYear(),n=[],o=t.length;o--&&t[o].date.getFullYear()==e;){n[n.length]=t[o]}return n.reverse(),n[0].prevclose=t[o]?t[o].prevclose||t[o].close:n[0].prevclose||n[0].close,n},rd:function(t,e){var n=[],o=S.dd(e);o.setFullYear(o.getFullYear()-5);for(var r=t.length;r--&&!(t[r].date<o);){n[n.length]=t[r]}return n.reverse(),n[0].prevclose=t[r]?t[r].close:n[0].close,n},adbd:function(t,e,n,o){for(var r,i,a,s,l=n?S.stbdt:S.stbd,u=t.length,c=e.length;c--;){if(a=e[c].date,1>u){c=e.length-t.length;for(var d=[],h=t[0];c-->0;){if(i=w(h)||{},i.isFake=!0,i.kke_cs=0,o){for(r in i){i.hasOwnProperty(r)&&g(i[r])&&(i[r]=0)}}d.push(i)}t=d.concat(t);break}for(var f=u--;f--&&(s=t[f].date,!l(a,s));){if(a>s){if(i=w(t[f]),i.isFake=!0,i.date=a,i.kke_cs=0,o){for(r in i){i.hasOwnProperty(r)&&g(i[r])&&(i[r]=0)}}t.splice(++f,0,i),u++;break}t.splice(f,1),u--}}return u>0&&t.splice(0,u),t},ayd:function(t,e,n,o,r){for(var i,a,s,l,u=S.stbd,c=t.length,d=e.length;d--;){if(s=e[d],!(s>r)){if(o>s&&!S.stbd(s,o)){break}for(var h=c--;h--&&(l=t[h].date,!u(s,l));){if(s>l){a=w(t[h]);var f=a.close;for(i in a){a.hasOwnProperty(i)&&g(a[i])&&(a[i]=0)}a.open=a.high=a.low=a.close=f,a.date=s,t.splice(++h,0,a),c++;break}t.splice(h,1),c--}}}return c>0&&t.splice(0,c),t}},this.domGc=new function(){var t=u.$C("div");return t.style.display="none",function(e,n){if(e){if(e.hasChildNodes()){for(;e.childNodes.length>0;){e.removeChild(e.firstChild)}}if(n){return void (e.innerHTML="")}t.appendChild(e),t.innerHTML=""}}},this.getSUrl=function(t){return t},this.TipM=s,this.logoM=new function(){var t="data:image/png;base64,",e=u.$C("img"),n=!1,o=[],r=[],i=function(){u.xh5_EvtUtil.addHandler(e,"load",function(){for(n=!0;o.length;){var t=o.shift();s(t)}}),e.src=t},a=function(t){if(t.logo&&!u.xh5_BrowserUtil.noH5){var e=t.logo;t.color||(t.color="#ccc");var n=u.hex2dec(t.color,0/0,!0);(!n||n.length<3)&&(n=[200,200,200]);for(var o=e.getContext("2d"),r=o.getImageData(0,0,e.width,e.height),i=n[0],a=n[1],s=n[2],l=0,c=r.data.length;c>l;l+=4){0!=r.data[l+3]&&(r.data[l]=i,r.data[l+1]=a,r.data[l+2]=s)}o.putImageData(r,0,0)}},s=function(t){if(u.xh5_BrowserUtil.noH5){return null}if(!n){for(var i=o.length;i--;){if(o[i].id==t.id){return null}}return o.push(t),null}var s;s=u.$C("canvas",t.id),s.style.zIndex=0,r.push(s),s.style.position="absolute",s.style.top=t.top+"px",s.style.right=t.right+"px",s.width=e.width,s.height=e.height,s.style.width=t.LOGO_W+"px",s.style.height=t.LOGO_H+"px";var l=s.getContext("2d");if(t.isShare){var c=u.xh5_BrowserUtil.hdpr;if(2>c){var d=c/2;l.scale(d,d)}}return l.drawImage(e,0,0),a({logo:s,color:t.color}),f(t.cb)&&t.cb(s),s};this.getLogo=s,this.styleLogo=a,i()},this.grabM=new function(){var t=function(t){var e=t.dom,n=t.child;if(!e||!n){return null}h(e)&&(e=u.$DOM(e));var o=e.getElementsByTagName(n);if(!o||o.length<1){return null}var r=u.xh5_BrowserUtil.hdpr,i=e.offsetWidth,a=e.offsetHeight,s=u.$C("canvas"),l=s.getContext("2d");s.style.width=i+"px",s.style.height=a+"px",s.width=i*r,s.height=a*r,1!=r&&l.scale(r,r);var c=u.xh5_HtmlPosUtil.pageX(e),d=u.xh5_HtmlPosUtil.pageY(e),f=u.xh5_HtmlPosUtil.parentY(e);l.textBaseline="top";for(var p,g,v=0,m=o.length;m>v;v++){p=o[v],g=u.getCSS(p);var y=u.xh5_HtmlPosUtil.pageX(p)-c,b=u.xh5_HtmlPosUtil.pageY(p)-d,x=Number(g.paddingLeft.split("px")[0]),w=0.5*(Number(g.lineHeight.split("px")[0])-Number(g.fontSize.split("px")[0]));l.fillStyle=g.backgroundColor,l.fillRect(y,b,p.offsetWidth,p.offsetHeight),l.font=[g.fontSize,g.fontFamily].join(" "),l.fillStyle=g.color,l.fillText(p.innerHTML,y+x,b+w)}return{canvas:s,x:c,y:f}},e=function(t,e){},n=function(n){if(!u.xh5_BrowserUtil.noH5){var o=n.ctn;if(o){for(var r,i,a=o.getElementsByTagName("canvas"),s=n.w||o.offsetWidth,l=n.h||o.offsetHeight,c=u.xh5_BrowserUtil.hdpr,d=[],h=u.xh5_HtmlPosUtil.pageX(o),f=u.xh5_HtmlPosUtil.pageY(o),g=a.length;g--;){i=a[g],r=i.style.zIndex;var v,m=!1;for(v=n.ignoreZIdxArr.length;v--;){if(r==n.ignoreZIdxArr[v]){m=!0;break}}if(!m){for(v=n.ignoreIdArr.length;v--;){if(i.id==n.ignoreIdArr[v]){m=!0;break}}if(!m){var y={canvas:i,x:u.xh5_HtmlPosUtil.pageX(i)-h,y:u.xh5_HtmlPosUtil.pageY(i)-f};d.push(y)}}}if(!n.nologo){var b=u.logoM.getLogo({cb:null,id:"share_logo",isShare:!0,top:n.top,right:n.right,LOGO_W:n.LOGO_W,LOGO_H:n.LOGO_H,color:n.color});
b&&d.push({canvas:b,x:s-Number(b.style.right.split("px")[0])-n.LOGO_W,y:Number(b.style.top.split("px")[0])})}if(n.extra){!p(n.extra)&&(n.extra=[n.extra]);for(var x=0,w=n.extra.length;w>x;x++){var N=t(n.extra[x]);N&&(d=d.concat(N))}}var A=u.$C("canvas"),C=A.getContext("2d");A.style.width=s+"px",A.style.height=l+"px",A.width=s*c,A.height=l*c,C.fillStyle=n.bgColor,C.fillRect(0,0,s,l);for(var k=0,T=d.length;T>k;k++){var S=d[k];C.drawImage(S.canvas,S.x*c,S.y*c)}e(A.toDataURL("image/png").substring(22),n)}}};this.shareTo=n},this.bridge=new function(){function t(t,e){for(var n in t){t.hasOwnProperty(n)&&(t[n]=e+t[n])}}var e,n,o=!1,r="sinatkchart_SLBridge~",i={SAVE:"save",LOAD:"load",REMOVE:"remove",DATA:"data",READY:"ready"};t(i,r);var a=[],s={},l=[],c=function(t){var e=t,n=e.key,o=e.options,r=e.value;A.save(n,r,o)},d=function(t){o||n||l.push([t])},h=function(t){var e=t,n=e.key,o=e.options;return A.load(n,o)},f=function(t,e){return o?void 0:n?void (s[t.uid]=e):void a.push([t,e])},p=function(t,e,n){var o=h(t);e(o),n||f(t,e)},g=function(t,e){t&&(c(t),e||d(t))},v=new function(){var t=function(t){if(t&&t.type){var e=t.type;if(-1!=e.indexOf(r)){return e}}return void 0},e=function(){for(var t;a.length;){t=a.shift(),p(t[0],t[1])}for(;l.length;){t=l.shift(),g(t[0])}};this.onMsg=function(n){var o;try{o=JSON.parse(n.data)}catch(r){}var a=t(o);if(a){switch(a){case i.READY:e();break;case i.DATA:if(!u.isFunc(s[o.uid])){return}s[o.uid](o.result),s[o.uid]=null,delete s[o.uid]}}}};u.xh5_EvtUtil.addHandler(window,"message",v.onMsg),this.load=p,this.save=g,this.getStatus=function(){return n&&!o&&"1"==e.getAttribute("data-ready")}},this.colorPicker=function(){function t(t,e){var n=function(){},o=t.prototype;n.prototype=e.prototype,t.prototype=new n;for(var r in o){o.hasOwnProperty(r)&&(t.prototype[r]=o[r])}t.prototype.constructor=t}function e(t,n,o){if(!n){return t}t||(t={});for(var r in n){n.hasOwnProperty(r)&&("Object"===P(n[r])?(!t[r]&&(t[r]={}),e(t[r],n[r],o)):!o&&r in t||(t[r]=n[r]))}return t}function n(t){var e="undefined"==typeof getComputedStyle?t.currentStyle:getComputedStyle(t);return e?(t.clientWidth||m(e.width)||m(t.style.width))-(m(e.paddingLeft)||0)-(m(e.paddingRight)||0)|0:0}function o(t){var e="undefined"==typeof getComputedStyle?t.currentStyle:getComputedStyle(t);return e?(t.clientHeight||m(e.height)||m(t.style.height))-(m(e.paddingTop)||0)-(m(e.paddingBottom)||0)|0:0}function r(t){return t.getBoundingClientRect?t.getBoundingClientRect():{left:0,top:0}}function i(t){var e=t.getContext("2d");e.clearRect(0,0,t.width,t.height)}function a(t,e){var r=document.createElement("canvas"),i=r.style,a=n(t),s=o(t),l=a*e.width,u=s*e.height;return r.width=l,r.height=u,i.position="absolute",i.width=l+"px",i.height=u+"px",i.left=a*e.left+"px",i.top=s*e.top+"px",t.appendChild(r),r}function s(t,e){var r=document.createElement("ul"),i=r.style,a=e.label,s=n(t),u=o(t);i.listStyle="none",i.padding=0,i.margin=0,i.font=e.font,i.position="absolute",i.left=s*e.left+"px",i.top=u*e.top+"px";for(var c=0,d=a.length;d>c;c++){l(r,c,e)}return t.appendChild(r),r}function l(t,e,n){var o=document.createElement("li"),r=document.createElement("label"),i=document.createElement("input"),a=r.style,s=o.style,l=i.style;return r.innerHTML=n.label[e],a.textAlign="right",a.display="inline-block",a.width=n.labelWidth+"px",a.color=n.color,"number"==n.type&&(i.type="number"),l.width=n.inputWidth+"px",s.marginBottom=n.gap+"px",C(i,"mousemove",function(t){k(t)}),o.appendChild(r),o.appendChild(i),t.appendChild(o),o}function c(t,e){var r=document.createElement("div"),i=r.style,a=n(t),s=o(t);return i.position="absolute",i.left=a*e.left+"px",i.top=s*e.top+"px",i.width=a*e.width+"px",i.height=s*e.height+"px",t.appendChild(r),r}function d(t,e){function n(n){n=D(e,n),t._onmousemove(n.NyanX,n.NyanY),t.onmousemove&&t.onmousemove(t)}function o(t){a=!0,n(t)}function r(t){a&&n(t),k(t),T(t)}function i(){a&&(a=!1)}var a=!1;"ontouchend" in window?(C(e,"touchstart",o),C(e,"touchmove",r),C(e,"touchend",i)):(C(e,"mousedown",o),C(e,"mousemove",r),C(e,"mouseup",i),C(e,"mouseout",i))}function h(t,e,n){return t=Math.round(t),e>t?e:t>n?n:t}function f(t,e,n){return e>t?e:t>n?n:t}function p(t){return t.length&&"%"===t.charAt(t.length-1)?h(parseFloat(t)/100*255,0,255):h(parseInt(t,10),0,255)}function g(t){return t.length&&"%"===t.charAt(t.length-1)?f(parseFloat(t)/100,0,1):f(parseFloat(t),0,1)}function v(t,e,n){return 0>n?n+=1:n>1&&(n-=1),1>6*n?t+(e-t)*n*6:1>2*n?e:2>3*n?t+(e-t)*(2/3-n)*6:t}function y(t){var e=(parseFloat(t[0])%360+360)%360/360,n=g(t[1]),o=g(t[2]),r=0.5>=o?o*(n+1):o+n-o*n,i=2*o-r;return[f(255*v(i,r,e+1/3),0,255),f(255*v(i,r,e),0,255),f(255*v(i,r,e-1/3),0,255)]}function b(t){if(t){var e,n,o=t[0]/255,r=t[1]/255,i=t[2]/255,a=Math.min(o,r,i),s=Math.max(o,r,i),l=s-a,u=(s+a)/2;if(0===l){e=0,n=0}else{n=0.5>u?l/(s+a):l/(2-s-a);var c=((s-o)/6+l/2)/l,d=((s-r)/6+l/2)/l,h=((s-i)/6+l/2)/l;o===s?e=h-d:r===s?e=1/3+c-h:i===s&&(e=2/3+d-c),0>e&&(e+=1),e>1&&(e-=1)}return[360*e,n,u]}}function x(t){if(t){t+="";
var e=t.replace(/ /g,"").toLowerCase();if("#"!==e.charAt(0)){var n=e.indexOf("("),o=e.indexOf(")");if(-1!==n&&o+1===e.length){var r=e.substr(0,n),i=e.substr(n+1,o-(n+1)).split(",");switch(r){case"rgb":if(3!==i.length){return}return[p(i[0]),p(i[1]),p(i[2])];case"hsl":if(3!==i.length){return}return y(i);default:return}}}else{if(4===e.length){var a=parseInt(e.substr(1),16);if(!(a>=0&&4095>=a)){return}return[(3840&a)>>4|(3840&a)>>8,240&a|(240&a)>>4,15&a|(15&a)<<4]}if(7===e.length){if(a=parseInt(e.substr(1),16),!(a>=0&&16777215>=a)){return}return[(16711680&a)>>16,(65280&a)>>8,255&a]}}}}function w(t){var e=[(+t[0]).toFixed(0),(+t[1]).toFixed(0),(+t[2]).toFixed(0)];return((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1)}function N(t){var e=[t[0].toFixed(0),(100*t[1]).toFixed(0)+"%",(100*t[2]).toFixed(0)+"%"];return"hsl("+e.join(",")+")"}function A(t,e){if(t){var n="Array"==P(t)?t:x(t);switch(e){case"rgb":return e+"("+n.join(",")+")";case"hex":return"#"+w(n);case"hsl":return N(b(n))}}}if("undefined"!=typeof getComputedStyle){var C=function(){return window.addEventListener?function(t,e,n){t.addEventListener(e,n)}:function(t,e,n){t.attachEvent("on"+e,n)}}(),k=function(){return window.addEventListener?function(t){t.stopPropagation()}:function(t){t.cancelBubble=!0}}(),T=function(){return window.addEventListener?function(t){t.preventDefault()}:function(t){t.returnValue=!1}}(),S=Object.prototype.toString,P=function(t){return null===t?"Null":void 0===t?"Undefined":S.call(t).slice(8,-1)},H=function(t,e){if(!t){return -1}if(t.indexOf){return t.indexOf(e)}for(var n=t.length;n--;){if(t[n]===e){return n}}},D=function(t,e){if(e=e||window.event,null!=e.NyanX){return e}var n=e.type,o=n&&H(n,"touch")>=0;if(o){var i="touchend"!=n?e.targetTouches[0]:e.changedTouches[0];if(i){var a=r(t);e.NyanX=i.clientX-a.left,e.NyanY=i.clientY-a.top}}else{var s=r(t);e.NyanX=e.clientX-s.left,e.NyanY=e.clientY-s.top,e.NyanDelta=e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3}return e},F={width:320,height:200,zIndex:10002,backgroundColor:"#444",wrapShadow:"3px 3px 4px rgba(0, 0, 0, 0.4)",color:"#66ccff",picker:{left:0.05,top:0.15,width:0.4,height:0.65,size:10,color:"#000",lineWidth:1},slider:{left:0.5,top:0.15,width:0.05,height:0.65},rgbBox:{label:["R:","G:","B:"],font:"12px Microsoft YaHei",color:"#FFFEFA",gap:8,type:"number",labelWidth:15,inputWidth:36,left:0.6,top:0.15},hslBox:{label:["H:","S:","L:"],font:"12px Microsoft YaHei",color:"#FFFEFA",gap:8,type:"number",labelWidth:15,inputWidth:36,left:0.78,top:0.15},hexBox:{label:["#"],font:"12px Microsoft YaHei",color:"#FFFEFA",labelWidth:15,inputWidth:60,left:0.03,top:0.85},colorBox:{left:0.63,top:0.6,width:0.32,height:0.2},okBtn:{text:"\u786e\u5b9a",backgroundColor:"#6C6C6C",color:"#FFFEFA",font:"12px Microsoft YaHei",left:0.65,top:0.87,width:0.12,height:0.1},cancelBtn:{text:"\u53d6\u6d88",backgroundColor:"#6C6C6C",color:"#FFFEFA",font:"12px Microsoft YaHei",left:0.83,top:0.87,width:0.12,height:0.1}},O=function(t,n){e(this,n),this.background=a(t,n),this.layer=a(t,n),this.H=0,this.S=0,d(this,this.layer),this.paintBG()};O.prototype={constructor:O,paintBG:function(){for(var t=this.background,e=t.getContext("2d"),n=t.width,o=t.height,r=e.createLinearGradient(0,0,n,0),i=0;1>i;i+=1/6){r.addColorStop(i,"hsl("+360*i+" , 100%, 50%)")}e.fillStyle=r,e.fillRect(0,0,n,o),r=e.createLinearGradient(0,0,0,o),r.addColorStop(0,"hsla(0, 0%, 50%, 0)"),r.addColorStop(1,"hsla(0, 0%, 50%, 1)"),e.fillStyle=r,e.fillRect(0,0,n,o)},_onmousemove:function(t,e){var r=this.layer,i=n(r),a=o(r);this.H=t/i*360,this.S=(a-e)/a},updatePoint:function(){var t=this.layer,e=t.getContext("2d"),r=this.size,i=n(t),a=o(t),s=this.H*i/360,l=a-this.S*a;e.clearRect(0,0,t.width,t.height),e.beginPath(),e.moveTo(s-r,l),e.lineTo(s+r,l),e.moveTo(s,l-r),e.lineTo(s,l+r),e.strokeStyle="black",e.lineWidth=2,e.stroke()},update:function(t){this.H=t[0],this.S=t[1],this.updatePoint()}};var M=function(t,n){e(this,n),this.background=a(t,n),this.layer=a(t,n),this.L=0.5,d(this,this.layer)};M.prototype={constructor:M,paintBG:function(t){var e=this.background,n=e.getContext("2d"),o=e.width,r=e.height,a=n.createLinearGradient(0,0,0,r);i(e),a.addColorStop(0,"#fff"),a.addColorStop(0.5,"hsl("+(+t[0]).toFixed(0)+", "+(100*t[1]).toFixed(0)+"%, 50%)"),a.addColorStop(1,"#000"),n.fillStyle=a,n.fillRect(0,0,o,r)},_onmousemove:function(t,e){var n=this.layer,r=o(n);this.L=(r-e)/r},updatePoint:function(t){for(var e=this.layer,n=e.getContext("2d"),r=o(e),i=r-this.L*r,a=y(t),s=a.length;s--;){a[s]=(255-a[s]).toFixed(0)}n.clearRect(0,0,e.width,e.height),n.beginPath(),n.moveTo(0,i+0.5),n.lineTo(e.width,i+0.5),n.strokeStyle=A(a,"hex"),n.lineWidth=3,n.stroke()},update:function(t){this.L=t[2],this.paintBG(t),this.updatePoint(t)}};var L=function(t,e){var n=this;this.box=s(t,e),C(this.box,"input",function(t){t.target.value=h(t.target.value,0,255),n.oninput&&n.oninput(t)})};L.prototype={constructor:L,getRGB:function(){var t=this.box.childNodes;return"rgb("+t[0].childNodes[1].value+", "+t[1].childNodes[1].value+", "+t[2].childNodes[1].value+")"
},getRGBArr:function(){var t=this.box.childNodes;return[t[0].childNodes[1].value,t[1].childNodes[1].value,t[2].childNodes[1].value]},update:function(t){for(var e=this.box.childNodes,n=y(t),o=0,r=n.length;r>o;o++){e[o].childNodes[1].value=(+n[o]).toFixed(0)}}};var R=function(t,e){var n=this;this.box=s(t,e);var o=this.box.childNodes;C(o[0].childNodes[1],"input",function(t){t.target.value=h(t.target.value,0,360),n.oninput&&n.oninput(t)}),C(o[1].childNodes[1],"input",function(t){t.target.value=h(t.target.value,0,100),n.oninput&&n.oninput(t)}),C(o[2].childNodes[1],"input",function(t){t.target.value=h(t.target.value,0,100),n.oninput&&n.oninput(t)})};R.prototype={constructor:R,getHSL:function(){var t=this.box.childNodes;return"hsl("+t[0].childNodes[1].value+", "+t[1].childNodes[1].value+"%, "+t[2].childNodes[1].value+"% )"},getHSLArr:function(){var t=this.box.childNodes;return[t[0].childNodes[1].value,t[1].childNodes[1].value/100,t[2].childNodes[1].value/100]},update:function(t){for(var e=this.box.childNodes,n=0,o=t.length;o>n;n++){e[n].childNodes[1].value=(n>0?100*t[n]:+t[n]).toFixed(0)}}};var U=function(t,e){var n=this;this.box=s(t,e);var o=this.box.childNodes;C(o[0].childNodes[1],"input",function(t){t.target.value=t.target.value.replace(/[^0-9A-Fa-f]/g,"").slice(0,6);var e=t.target.value.length;6==e&&n.oninput&&n.oninput(t)})};U.prototype={constructor:U,getHEX:function(){return"#"+this.box.childNodes[0].childNodes[1].value},update:function(t){var e=this.box.childNodes;e[0].childNodes[1].value=w(y(t))}};var B=function(t,e){this.btn=c(t,e);var n=this.btn.style;this.btn.innerHTML=e.text,n.font=e.font,n.lineHeight=o(t)*e.height+"px",n.textAlign="center",n.backgroundColor=e.backgroundColor,n.color=e.color,n.cursor="pointer"},E=function(t,e){this.box=c(t,e),this.box.style.backgroundColor="#000"};E.prototype={constructor:E,update:function(t){for(var e=y(t),n=e.length;n--;){e[n]=(+e[n]).toFixed(0)}this.box.style.backgroundColor="rgb("+e[0]+", "+e[1]+", "+e[2]+")"}};var I=function(t){t=t||{},this.param=e(t,F),this.inited=!1,u.xh5_EvtDispatcher.call(this)};return I.prototype={constructor:I,init:function(){if(!this.inited){var t=this.param,e=b(x(t.color));this._initDoms(t),this._initEvent(),this.update(e),document.body.appendChild(this.wrap),this.inited=!0}},_initDoms:function(t){var e=document.createElement("div"),n=e.style;n.position="absolute",n.width=t.width+"px",n.height=t.height+"px",n.zIndex=t.zIndex,n.backgroundColor=t.backgroundColor,n.boxShadow=t.wrapShadow,n.transition="opacity 0.2s ease-in-out 0s",n.opacity=0,n.visibility="hidden",n.userSelect="none",n.webkitUserSelect="none",n.msUserSelect="none",n.mosUserSelect="none",this.wrap=e,this.picker=new O(e,t.picker),this.slider=new M(e,t.slider),this.rgbBox=new L(e,t.rgbBox),this.hslBox=new R(e,t.hslBox),this.hexBox=new U(e,t.hexBox),this.colorBox=new E(e,t.colorBox),this.okBtn=new B(e,t.okBtn),this.cancelBtn=new B(e,t.cancelBtn)},_initEvent:function(){function t(t){x=!0,o=+y.left.replace(/[^0-9.]/g,""),r=+y.top.replace(/[^0-9.]/g,""),t.targetTouches?(i=t.targetTouches[0].clientX,a=t.targetTouches[0].clientY):(i=t.clientX,a=t.clientY)}function e(t){x&&(t.targetTouches?(s=t.targetTouches[0].clientX-i,l=t.targetTouches[0].clientY-a):(s=t.clientX-i,l=t.clientY-a),y.left=+o+ +s+"px",y.top=+r+ +l+"px",k(t)),T(t)}function n(){x=!1}var o,r,i,a,s,l,u=this,c=this.wrap,d=this.picker,h=this.slider,f=this.rgbBox,p=this.hslBox,g=this.hexBox,v=this.okBtn,m=this.cancelBtn,y=c.style,x=!1;"ontouchend" in window?(C(c,"touchstart",t),C(c,"touchmove",e),C(c,"touchend",n)):(C(c,"mousedown",t),C(c,"mousemove",e),C(c,"mouseup",n),C(c,"mouseout",n)),d.onmousemove=function(){u.update([d.H,d.S,h.L])},h.onmousemove=function(){u.update([d.H,d.S,h.L])},p.oninput=function(){u.update(p.getHSLArr())},f.oninput=function(){u.update(b(f.getRGBArr()))},g.oninput=function(){u.update(g.getHEX())},C(v.btn,"click",function(){u.hide(),u.re("ok",[{rgb:f.getRGB(),hsl:p.getHSL(),hex:A(p.getHSL(),"hex")},u.target]),u.onok&&u.onok({rgb:f.getRGB(),hsl:p.getHSL(),hex:A(p.getHSL(),"hex")},u.target)}),C(m.btn,"click",function(){u.hide()})},show:function(t,e,n,o){!this.inited&&this.init();var r=this.wrap,i=r.style;i.left=(t?t:0)+"px",i.top=(e?e:0)+"px",i.visibility="visible",i.opacity=1,o&&this.update(o),this.target=n},hide:function(){if(this.inited){var t=this.wrap,e=t.style;e.visibility="hidden",e.opacity=0}},update:function(t){var e="Array"==P(t)?t:b(x(t));this.picker.update(e),this.slider.update(e),this.rgbBox.update(e),this.hslBox.update(e),this.hexBox.update(e),this.colorBox.update(e)}},t(I,u.xh5_EvtDispatcher),new I}}(),this.HQ_DOMAIN=l()}});